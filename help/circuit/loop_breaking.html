<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>help:circuit:loop_breaking - Workcraft</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="help,circuit,loop_breaking"/>
<link rel="search" type="application/opensearchdescription+xml" href="../lib/exe/opensearch.html" title="Workcraft"/>
<link rel="start" href="loop_breaking.html"/>
<link rel="contents" href="loop_breaking.html" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Changes" />
<link rel="alternate" type="application/rss+xml" title="Current namespace" />
<link rel="edit" title="Edit this page" href="loop_breaking.html"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../_export/xhtml/help/circuit/loop_breaking.xhtml"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../_export/raw/help/circuit/loop_breaking.raw"/>
<link rel="canonical" href="https://workcraft.org/help/circuit/loop_breaking"/>
<link rel="stylesheet" type="text/css" href="../lib/exe/css.php.t.dokuwiki-light-export.css"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='help:circuit';var SIG=' --- //[[support@workcraft.org| ]] 2019/07/30 12:25//';var JSINFO = {"id":"help:circuit:loop_breaking","namespace":"help:circuit","fastwiki":{"secedit":1,"preview":1,"fastpages":1,"save":0,"fastshow":0,"fastshow_same_ns":1,"fastshow_include":"","fastshow_exclude":"","preload":false,"preload_head":"====47hsjwycv782nwncv8b920m8bv72jmdm3929bno3b3====","preload_batchsize":false,"preload_per_page":false,"locktime":840,"usedraft":1,"text_btn_show":"Show page","templatename":"dokuwiki-light-export"},"act":"show","ajax":"ajax","move_renameokay":true,"plugin_folded":{"hide":"hide","reveal":"reveal"}};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../lib/exe/jquery.php.t.dokuwiki-light-export.js"></script>
<script type="text/javascript" charset="utf-8" src="../lib/exe/js.php.t.dokuwiki-light-export.js"></script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../favicon.ico" />
<link rel="apple-touch-icon" href="../apple-touch-icon.png" />
    </head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki-light-export loggedIn    ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

        <h1><a href="../start.html"  title="Workcraft start page"><img src="../logo.png" width="327" height="57" alt="" /></a></h1>
    
    <div class="tools group">
        <!-- USER TOOLS -->
<!--
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="loop_breaking.html"  class="action admin" rel="nofollow" title="Admin">Admin</a></li><li><a href="loop_breaking.html"  class="action profile" rel="nofollow" title="Profile">Profile</a></li><li><a href="loop_breaking.html"  class="action logout" rel="nofollow" title="Log Out">Log Out</a></li>                </ul>
            </div>
        -->

        <!-- SEARCH TOOLS -->
<!--
        <div id="dokuwiki__searchtools">
            <h3 class="a11y"></h3>
            <form action="../start.html" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" placeholder="Search" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><button type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>        </div>
-->

        <!-- SITE TOOLS -->
<!--
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
                            <div class="mobileTools">
                    <form action="..//doku.html.doku.php.html" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="help:circuit:loop_breaking" /><input type="hidden" name="sectok" value="3321239b65bf5095a111abf45b89b4ec" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Edit this page</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Changes</option><option value="media">Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="logout">Log Out</option><option value="profile">Profile</option><option value="admin">Admin</option></optgroup></select><button type="submit">&gt;</button></div></form>                </div>
                <ul>
                    <li><a href="loop_breaking.html"  class="action recent" accesskey="r" rel="nofollow" title="Changes [R]">Changes</a></li><li><a href="loop_breaking.html"  class="action media" rel="nofollow" title="Manager">Manager</a></li><li><a href="loop_breaking.html"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>                </ul>
                    </div>
-->
    </div>

    <!-- BREADCRUMBS -->
<!--
    -->



    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>help:circuit:loop_breaking</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <div class="plugin_fastwiki_marker" style="display:none"></div>
<h2 id="cycle_analyser">Cycle analyser</h2>
<div class="level2">

<p>
Combinational cycles are common in asynchronous circuits – they (along with latches) usually implement “memory” of the circuit. Verilog netlist for such cyclic circuits, however, may upset conventional EDA tools for timing analysis (e.g. Synopsys PrimeTime) and offline testing (e.g. Synopsys TetraMAX):
</p>
<ul>
<li class="level"><div class="li">
 Static timing analysis requires the circuit to be free of combinational cycles and breaks them by disabling some of the timing arcs. The choice of the timing arcs to disable, however, is often difficult to predict and suboptimal, and in particular may cause removal of timing paths that are important for timing analysis, e.g. critical paths.
</div></li>
</ul>

<ul>
<li class="level"><div class="li">
 Offline testing may also be affected by the combinational cycles as they limit the <em>controlability</em> of the circuit – the ability to set every signal to a specific state via the circuit&#039;s primary inputs.
</div></li>
</ul>


<p>
Workcraft introduces a <em>Path breaker</em> property for the component pins to explicitly break the combinational cycles. Interpretation of this property differs for the input and output pins of a gate:
</p>
<ul>
<li class="level"><div class="li">
 For each <strong>input pin</strong> whose <em>Path breaker</em> property is set, a <code>set_disable_timing</code> constraint is generated – it disables the timing arcs from that input pin, thus removing timing paths through the pin. These constraints can be dumped into an SDC file and subsequently used to explicitly instruct a timing analysis tool to disable specific timing arcs, rather than rely on its unpredictable arc selection algorithm. Careful selection of the timing arcs for disabling may help to break all the combinational cycles in the circuit while preserving the important/interesting timing paths. This requires creativity from the designer and is not always possible.
</div></li>
</ul>

<ul>
<li class="level"><div class="li">
 For each <strong>output pin</strong> whose <em>Path breaker</em> property is set, a special element called <em>testable buffer</em> or <em>testable inverter</em> is inserted. Such testable elements need to be designed and characterised for each gate library, so the timing analysis tool is aware of their path breaking capability. Moreover, the testable elements can be further extended with SCAN features, making asynchronous design compatible with conventional DfT methodology <a href="#refnotes:1:note1" name="refnotes:1:ref1" class="refnotes-ref note-popup">[1]</a>.
</div></li>
</ul>


<p>
Note that both ways of dealing with combinational cycles can be combined in the same circuit. 
</p>

<p>
<em>Cycle analyser</em> <img src="editor_tools-cycle_analysis.png" class="media" title="[Y] Cycle analyser" alt="[Y] Cycle analyser" /> tool provides a convenient <abbr title="Graphical User Interface">GUI</abbr> for exploration of loop breaking alternatives. It automates the removal of combinational cycles and the insertion of testing features in asynchronous circuits. <em>Cycle analyser</em> control panel looks as follows:
</p>

<p>
<img src="tool_controls-loop_breaking.png" class="mediacenter" alt="" />
</p>

<p>
When the tool is activated, the circuit gates are highlighted using the following scheme (the colours can be adjusted in the preferences of digital circuit model – see <em>Edit→Preferences…→Decoration→Analysis</em>):
</p>
<ul>
<li class="level"><div class="li">
 Zero delay gates and their output pins are highlighted <span style='color:grey; '> grey</span>. This is to indicate that zero delay gates cannot be delayed by inserting testable buffers. Input pins of zero delay gates can still be set as path breakers though.
</div></li>
<li class="level"><div class="li">
 Components and pins that lay on a cycle are highlighted <span style='color:magenta; '> magenta</span>.
</div></li>
<li class="level"><div class="li">
 Pins whose <em>Path breaker</em> property is set are highlighted <span style='color:orange; '>orange</span>. Components with path breaker pins are also highlighted <span style='color:orange; '>orange</span>.
</div></li>
<li class="level"><div class="li">
 Components and pins that do not belong to any cycle are highlighted <span style='color:lime; '>green</span>.
</div></li>
</ul>


<p>
<em>Path breakers</em> table enumerates the pins whose <em>Path breaker</em> property is set. Note that <em>Path breaker</em> property of a pin can be toggled while in <em>Cycle analyser</em> tool by clicking the corresponding pin; clicking on a gate toggles <em>Path breaker</em> property of its only output. The change is immediately visualised via updated highlighting of components and pins. This enables convenient exploration of possible cycle breaking strategies.
</p>

<p>
<em>Cycle analyser</em> also provides several ways of changing <em>Path breaker</em> property for a group of output pins (input pins are not affected by these actions):
</p>
<ul>
<li class="level"><div class="li">
 <img src="tool_controls-loop_breaking-self_loop.png" class="media" title="Path breaker all self loops" alt="Path breaker all self loops" /> - Tag <em>Path breaker</em> property for output pins of components with feedback loops. Note that feedback loops via zero-delay inverters or buffers are also included.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-loop_breaking-tag_necessary.png" class="media" title="Auto-append path breaker pins as necessary to complete cycle breaking" alt="Auto-append path breaker pins as necessary to complete cycle breaking" /> - Set <em>Path breaker</em> property of output pins as necessary to break all the cycles in the circuit.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-loop_breaking-untag_redundant.png" class="media" title="Auto-discard path breaker pins that are redundant for cycle breaking" alt="Auto-discard path breaker pins that are redundant for cycle breaking" /> - Clear <em>Path breaker</em> property of output pins that are redundant for breaking all cycles in the circuit.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-loop_breaking-clear_all.png" class="media" title="Clear all path breaker pins" alt="Clear all path breaker pins" /> - Clear <em>Path breaker</em> property for all the pins.
</div></li>
</ul>


<p>
Once all the cycles are broken by strategically assigning the <em>Path breaker</em> property to the pins, the buttons at the bottom of the tool panel are used as follows:
</p>
<ul>
<li class="level"><div class="li">
 <strong>Insert TBUF/TINV</strong>  – insert testable buffers/inverters after output pins with <em>Path breaker</em> property set. Note that insertion of testable buffers is optimised as follows: If the path breaker pin belongs to a buffer (inverter), or if the only gate it drives is a buffer (inverter), then, instead of inserting a new testable gate, that buffer (inverter) is converted into the testable buffer(testable inverter).
</div></li>
</ul>

<div class="wrap_info wrap_round wrap_center plugin_wrap" style="width: 90%;">
<p>
By default the testable buffer gate is <code>TBUF</code> with input <code>I</code> and output <code>O</code>; testable inverter gate is <code>TINV</code> with <code>I</code> and <code>ON</code> pins. These names can be changed in <em>Edit→Preferences…→Models→Digital Circuit</em> preferences via <em>Testable buffer name and input-output pins</em> and <em>Testable inverter name and input-output pins</em> settings.
</p>
</div><ul>
<li class="level"><div class="li">
 <strong>Insert SCAN</strong> – insert SCAN ports and connect them to the <em>testable buffers</em>.
</div></li>
</ul>

<div class="wrap_info wrap_round wrap_center plugin_wrap" style="width: 90%;">
<p>
When connecting a gate to scan ports its module name is automatically changed by adding <code>_SCAN</code> suffix. This default suffix can be changed in <em>Edit→Preferences…→Models→Digital Circuit</em> preferences via <em>Scan module suffix</em> setting. By default SCAN primary inputs are called <code>scanck</code>, <code>scanen</code>, <code>scanin</code>, and <code>scanout</code> while the corresponding pins of testable gates are <code>CK</code>, <code>SE</code>, <code>SI</code>, and <code>SO</code> (the latter is only used in multi-output components). These names can also be changed in <em>Edit→Preferences…→Models→Digital Circuit</em> preferences via <em>Scan clock port / pin names</em>, <em>Scan enable port / pin names</em>, <em>Scan input port / pin names</em> and <em>Scan output poert / pin (for multi-output component) names</em> settings.
</p>
</div><ul>
<li class="level"><div class="li">
 <strong>Write SDC…</strong> – write out an SDC file with <code>set_disable_timing</code> constraints for each input pin with <em>Path breaker</em> property set. This button is disabled if there are no input pins with <em>Path breaker</em> property set.
</div></li>
</ul>

<div class="wrap_info wrap_round wrap_center plugin_wrap" style="width: 90%;">
<p>
By default the produced SDC file uses the names of gates and pins as they are defined in the <em>Property editor</em> for the corresponding nodes. If necessary, these names can be substituted by providing a conversion file in <em>Edit→Preferences…→Models→Digital Circuit</em> preferences via <em>Substitution rules for export</em> setting. For example, <code>libraries/workcraft-tsmc_ghp.cnv</code> file has rules to convert <code>librarys/workcraft.lib</code> gates to match the naming convention of TSMC GHP library. This is a convenient way to convert a circuit (and its constraints) mapped into one gate library to be used with another library.
</p>
</div>


</div>
<div class="refnotes">
<hr>
<div class="notes">
<div class="note left">
<b><a name="refnotes:1:note1" class="nolink">[1]</a></b>
<span id="refnotes:1:note1:text">
D. Lloyd, R. Illman: <em>“Scan insertion and ATPG for C-gate based
asynchronous designs”</em>, in Synopsys User Group (SNUG), 2014.
</span></div>
</div>
</div>

                    <!-- wikipage stop -->
                                    </div>
<!--
                                    <div class="docInfo"><bdi>help/circuit/loop_breaking.txt</bdi> · Last modified: 2019/07/03 15:54 by <bdi>danil</bdi></div>
                -->

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
<!--
            <div id="dokuwiki__pagetools">
                            <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="loop_breaking.html"  class="action edit" accesskey="e" rel="nofollow" title="Edit this page [E]"><span>Edit this page</span></a></li><li><a href="loop_breaking.html"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="loop_breaking.html"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="loop_breaking.html"  class="action export_pdf" rel="nofollow" title="Export to PDF"><span>Export to PDF</span></a></li><li class="plugin_move_page"><a href="loop_breaking.html"><span>Rename Page</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li><li><a href="loop_breaking.html"  class="action siteexport_addpage" title="Export Page (Siteexport)"><span>Export Page</span></a></li><li><a href="javascript:void(0);" class="fold_unfold_all" onclick="fold_unfold_all();" rel="nofollow" title="Fold/unfold all"><span>Fold/unfold all</span></a></li><li><a href="loop_breaking.html"  class="action siteexport_mapid" title="Show Map-ID"" data-mapid="loop_breaking" onclick="copyMapIDToClipBoard.call(this); return false;"><span>Copy Map-ID: <span class="mapID" data-done="Done.">loop_breaking</span></span></a></li>                    </ul>
                </div>
                        </div>
-->
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
<!--
    
    <div class="buttons">
                <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://php.net" title="Powered by PHP" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
    <div class="userInfo">
        Logged in as:: workcraft    </div>
-->
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img  width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div></body>
</html>
