<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>help:circuit:initialisation - Workcraft</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="noindex,nofollow"/>
<meta name="keywords" content="help,circuit,initialisation"/>
<link rel="search" type="application/opensearchdescription+xml" href="../lib/exe/opensearch.html" title="Workcraft"/>
<link rel="start" href="initialisation.html"/>
<link rel="contents" href="initialisation.html" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Changes" />
<link rel="alternate" type="application/rss+xml" title="Current namespace" />
<link rel="edit" title="Edit this page" href="initialisation.html"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../_export/xhtml/help/circuit/initialisation.xhtml"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../_export/raw/help/circuit/initialisation.raw"/>
<link rel="canonical" href="https://workcraft.org/help/circuit/initialisation"/>
<link rel="stylesheet" type="text/css" href="../lib/exe/css.php.t.dokuwiki-light-export.css"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='help:circuit';var SIG=' --- //[[danilovesky@gmail.com|Danil Sokolov]] 2018/10/31 22:04//';var JSINFO = {"id":"help:circuit:initialisation","namespace":"help:circuit","fastwiki":{"secedit":1,"preview":1,"fastpages":1,"save":0,"fastshow":0,"fastshow_same_ns":1,"fastshow_include":"","fastshow_exclude":"","preload":false,"preload_head":"====47hsjwycv782nwncv8b920m8bv72jmdm3929bno3b3====","preload_batchsize":false,"preload_per_page":false,"locktime":840,"usedraft":1,"text_btn_show":"Show page","templatename":"dokuwiki-light-export"},"act":"show","ajax":"ajax","move_renameokay":true,"plugin_slider":{"width":800,"mode":"horizontal","infiniteLoop":true,"hideControlOnEnd":false,"speed":500,"easing":null,"slideMargin":0,"startSlide":0,"randomStart":false,"captions":false,"ticker":false,"tickerHover":false,"adaptiveHeight":false,"adaptiveHeightSpeed":500,"video":false,"useCSS":true,"preloadImages":"visible","responsive":true,"pager":true,"pagerType":"full","pagerShortSeparator":"\/","controls":true,"nextText":"Next","prevText":"Prev","autoControls":false,"startText":"Start","stopText":"Stop","autoControlsCombine":false,"auto":false,"pause":4000,"autoStart":true,"autoDirection":"next","autoHover":false,"autoDelay":0,"minSlides":1,"maxSlides":1,"moveSlides":0,"slideWidth":0,"touchEnabled":true,"swipeThreshold":50,"oneToOneTouch":true,"preventDefaultSwipeX":true,"preventDefaultSwipeY":false},"plugin_folded":{"hide":"hide","reveal":"reveal"}};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../lib/exe/jquery.php.t.dokuwiki-light-export.js"></script>
<script type="text/javascript" charset="utf-8" src="../lib/exe/js.php.t.dokuwiki-light-export.js"></script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../favicon.ico" />
<link rel="apple-touch-icon" href="../apple-touch-icon.png" />
    </head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki-light-export loggedIn    ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

        <h1><a href="../start.html"  title="Workcraft start page"><img src="../logo.png" width="327" height="57" alt="" /></a></h1>
    
    <div class="tools group">
        <!-- USER TOOLS -->
<!--
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="initialisation.html"  class="action admin" rel="nofollow" title="Admin">Admin</a></li><li><a href="initialisation.html"  class="action profile" rel="nofollow" title="Profile">Profile</a></li><li><a href="initialisation.html"  class="action logout" rel="nofollow" title="Log Out">Log Out</a></li>                </ul>
            </div>
        -->

        <!-- SEARCH TOOLS -->
<!--
        <div id="dokuwiki__searchtools">
            <h3 class="a11y"></h3>
            <form action="../start.html" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" placeholder="Search" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><button type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>        </div>
-->

        <!-- SITE TOOLS -->
<!--
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
                            <div class="mobileTools">
                    <form action="..//doku.html.doku.php.html" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="help:circuit:initialisation" /><input type="hidden" name="sectok" value="0af3f4ff520f3c74fc303ad174806443" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Edit this page</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Changes</option><option value="media">Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="logout">Log Out</option><option value="profile">Profile</option><option value="admin">Admin</option></optgroup></select><button type="submit">&gt;</button></div></form>                </div>
                <ul>
                    <li><a href="initialisation.html"  class="action recent" accesskey="r" rel="nofollow" title="Changes [R]">Changes</a></li><li><a href="initialisation.html"  class="action media" rel="nofollow" title="Manager">Manager</a></li><li><a href="initialisation.html"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>                </ul>
                    </div>
-->
    </div>

    <!-- BREADCRUMBS -->
<!--
    -->



    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>help:circuit:initialisation</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <div class="plugin_fastwiki_marker" style="display:none"></div>
<h2 id="initialisation_analyser">Initialisation analyser</h2>
<div class="level2">

<p>
Initialisation (or reset) of a speed-independent circuit is an important part of the design process because a circuit can malfunction if its initial state is incorrect. Note that the initialisation phase of a speed-independent circuit does not have to be speed-independent: It is assumed that there is a special <code><span style='color:red; '>reset</span></code> signal that is generated externally and behaves as follows:
</p>
<ul>
<li class="level"><div class="li">
 When the power is connected, <code><span style='color:red; '>reset</span></code> is low.
</div></li>
<li class="level"><div class="li">
 It stays low for sufficiently long time to complete the initialisation of all gates.
</div></li>
<li class="level"><div class="li">
 Eventually <code><span style='color:red; '>reset</span></code> goes high, at which point the circuit is already correctly initialised and the normal speed-independent operation begins.
</div></li>
<li class="level"><div class="li">
 <code><span style='color:red; '>reset</span></code> stays high for the whole time of circuit normal operation. 
</div></li>
</ul>


<p>
There are several ways of circuit initialisation that can be used in combination:
</p>
<ul>
<li class="level"><div class="li">
 Rely on the initial state of some of the inputs (which are guaranteed to be correctly initialised by the environment). They propagate through some of the logic gates to initialise some of the internal and output signals.
</div></li>
<li class="level"><div class="li">
 Substitute some of the gates with ones containing an extra input that can act as a set or reset pin.
</div></li>
<li class="level"><div class="li">
 Insert additional gates to explicitly initialise the internal and output signals. Such gates will act as buffers during the normal operation, so one has to be careful not to break any <em>isochronic forks</em>.
</div></li>
</ul>


<p>
<em>Initialisation analyser</em> <img src="editor_tools-initialisation_analysis.png" class="media" title="[I] Initialisation analyser" alt="[I] Initialisation analyser" /> tool is designed to aid the decision of how to reset these modules. The tool uses <em>Init to one</em> and <em>Forced init</em> properties of circuit signals (i.e. primary input ports and output pins of circuit components):
</p>
<ul>
<li class="level"><div class="li">
 <em>Init to one</em> property defines the initial state of the signal. If a circuit is synthesised by one of the backend tools, then the initial state of all its signals is set automatically. However, if the circuit is manually altered, then the designer is responsible for specifying the initial states of the signals.
</div></li>
</ul>

<ul>
<li class="level"><div class="li">
 <em>Forced init</em> property defines if the signal is known to be in a correct initial state. For a primary input it means the environment takes care of initialising the signal to its expected state.  For a  component output pin it means that the necessary circuitry will be added to properly initialise that pin.
</div></li>
</ul>


<p>
These properties can be viewed and modified in the <em>Property editor</em> when an input port or an output pin is selected. Note that selecting a single-output component (i.e. a gate) also reveals these properties of its only output pin.
</p>

<p>
<em>Initialisation analyser</em> uses these properties as follows. It considers the signals whose <em>Forced init</em> property is set as <em>initialised</em>, while the remaining signals are assumed as <em>uninitialised</em>. The tool tries to evaluate each <em>uninitialised</em> signal on the <em>Init to one</em> property of <em>initialised</em> signals. If the Boolean value of a signal can be derived, then it is said to have <em>propagated initial state</em> and the signal is also considered <em>initialised</em>. The tool repeats evaluation of <em>uninitialised</em> signals until no further progress can be made, i.e. no new <em>initialised</em> signals can be obtained. At this stage, if some signals are still <em>uninitialised</em> it means <em>Forced init</em> property of the circuit signals needs to be adjusted, until all the signals are successfully initialised. 
</p>

<p>
If the propagated initial state of a signal does not match its <em>Init to one</em> property, then the signal is said to have <em>initialisation conflict</em> – this often indicates a mistake, e.g. incorrect initial value of the signal. However, there are legitimate situations where such conflicts can occur – most likely such a signal needs to be explicitly initialised by setting its <em>Forced init</em> property.
</p>

<p>
<em>Initialisation analyser</em> visualises the initialisation state using the <em>Gate highlight legend</em> shown in the <em>Tool controls</em>:
</p>

<p>
<img src="tool_controls-initialisation.png" class="mediacenter" alt="" />
</p>

<p>
By default the highlighting scheme is as follows (the colours can be adjusted in the preferences of digital circuit model – see <em>Edit→Preferences…→Models→Digital Circuit</em>):
</p>
<ul>
<li class="level1"><div class="li"> The wires and pins of <em>initialised</em> signals are coloured <span style='color:red; '>red</span> (if <em>Init to one</em> property is set) or <span style='color:blue; '>blue</span> (if <em>Init to one</em> is not set). Wires and pins of <em>uninitialised</em> signals are coloured black.</div>
</li>
<li class="level1"><div class="li"> Components whose initial state cannot be determined via propagation of <em>forced</em> signals are not highlighted (i.e. remain white).</div>
</li>
<li class="level1"><div class="li"> In case of initialisation conflicts, the problematic gates are highlighted <span style='color:magenta; '> magenta</span>.</div>
</li>
<li class="level1"><div class="li"> Output pins whose <em>Forced init</em> property is set are visualised by diamond shape and their components  are highlighted <span style='color:orange; '>orange</span>.</div>
</li>
<li class="level1"><div class="li"> Correctly initialised components are highlighted <span style='color:lime; '>green</span>.</div>
</li>
</ul>

<p>
<em>Force init pins</em> table enumerates the pins whose <em>Forced init</em> property is set. Note that <em>Forced init</em> property of a signal can be toggled while in <em>Initialisation analyser</em> tool by clicking the corresponding input port, output pin, or a gate. This enables convenient exploration of possible reset strategies. The tool also provides several ways of changing <em>Force init</em> property for a group of contacts:
</p>
<ul>
<li class="level"><div class="li">
 <img src="tool_controls-initialisation-clear_all.png" class="media" title="Clear force init from all input ports and component outputs" alt="Clear force init from all input ports and component outputs" /> - Unset <em>Forced init</em> property for all input ports and component outputs.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-initialisation-input_port.png" class="media" title="Toggle force init for all input ports (environment responsibility)" alt="Toggle force init for all input ports (environment responsibility)" /> - Toggle <em>Forced init</em> property for all input ports. Note that it is the environment responsibility to guarantee the correct initialisation of primary inputs whose <em>Forced init</em> property is set.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-initialisation-self_loop.png" class="media" title="Toggle force init for all self-loops" alt="Toggle force init for all self-loops" /> - Toggle <em>Forced init</em> property for all component outputs with self-loops.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-initialisation-sequential_gate.png" class="media" title="Toggle force init for all sequential gates" alt="Toggle force init for all sequential gates" /> - Toggle <em>Forced init</em> property for outputs of all sequential gates.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-initialisation-untag_redundant.png" class="media" title="Remove force init from pins if redundant for initialisation" alt="Remove force init from pins if redundant for initialisation" /> - Unset <em>Forced init</em> property of the component outputs if they are redundant for the circuit initialisation.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-initialisation-tag_necessary.png" class="media" title="Add force init to pins if necessary to complete initialisation" alt="Add force init to pins if necessary to complete initialisation" /> - Set <em>Forced init</em> property of component outputs as necessary to complete initialisation of the circuit.
</div></li>
</ul>


<p>
Circuit initialisation comprises three steps:
</p>
<ol>
<li class="level"><div class="li">
 <strong>Reset exploration</strong> – Decide which signals should be forced to the initial state, so that the correct initial values propagate to the remaining circuit components. Selecting a good set of forced signals is a creative process with multiple optimisation targets (avoiding critical paths, circuit size, gate complexity, etc.) and relies on designer experience.
</div></li>
<li class="level"><div class="li">
 <strong>Reset insertion</strong> – Insert the reset port <code><span style='color:red; '>reset</span></code>, set its <em>Init to one</em> property according to the reset active state (<em>false</em> for active low, <em>true</em> for active high), and use it to initialise all the signals that have <em>Force init</em> property set.
</div></li>
<li class="level"><div class="li">
 <strong>Reset validation</strong>  – Clear <em>Force init</em> property of all component pins and input ports, set <em>Force init</em> property for the reset port, and check that all the circuit components are correctly initialised.
</div></li>
</ol>


</div>

                    <!-- wikipage stop -->
                                    </div>
<!--
                                    <div class="docInfo"><bdi>help/circuit/initialisation.txt</bdi> · Last modified: 2018/10/31 14:51 by <bdi>danil</bdi></div>
                -->

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
<!--
            <div id="dokuwiki__pagetools">
                            <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="initialisation.html"  class="action edit" accesskey="e" rel="nofollow" title="Edit this page [E]"><span>Edit this page</span></a></li><li><a href="initialisation.html"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="initialisation.html"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li class="plugin_move_page"><a href="initialisation.html"><span>Rename Page</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li><li><a href="initialisation.html"  class="action siteexport_addpage" title="Export Page (Siteexport)"><span>Export Page</span></a></li><li><a href="javascript:void(0);" class="fold_unfold_all" onclick="fold_unfold_all();" rel="nofollow" title="Fold/unfold all"><span>Fold/unfold all</span></a></li><li><a href="initialisation.html"  class="action siteexport_mapid" title="Show Map-ID"" data-mapid="initialisation" onclick="copyMapIDToClipBoard.call(this); return false;"><span>Copy Map-ID: <span class="mapID" data-done="Done.">initialisation</span></span></a></li>                    </ul>
                </div>
                        </div>
-->
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
<!--
    
    <div class="buttons">
                <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://php.net" title="Powered by PHP" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
    <div class="userInfo">
        Logged in as:: danil    </div>
-->
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img  width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div></body>
</html>
