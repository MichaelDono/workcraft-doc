<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>help:circuit:start - Workcraft</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="help,circuit,start"/>
<link rel="search" type="application/opensearchdescription+xml" href="../lib/exe/opensearch.html" title="Workcraft"/>
<link rel="start" href="start.html"/>
<link rel="contents" href="start.html" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Changes" />
<link rel="alternate" type="application/rss+xml" title="Current namespace" />
<link rel="edit" title="Edit this page" href="start.html"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../_export/xhtml/help/circuit/start.xhtml"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../_export/raw/help/circuit/start.raw"/>
<link rel="canonical" href="https://workcraft.org/help/circuit/start"/>
<link rel="stylesheet" type="text/css" href="../lib/exe/css.php.t.dokuwiki-light-export.css"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='help:circuit';var SIG=' --- //[[support@workcraft.org| ]] 2019/07/30 12:25//';var JSINFO = {"id":"help:circuit:start","namespace":"help:circuit","fastwiki":{"secedit":1,"preview":1,"fastpages":1,"save":0,"fastshow":0,"fastshow_same_ns":1,"fastshow_include":"","fastshow_exclude":"","preload":false,"preload_head":"====47hsjwycv782nwncv8b920m8bv72jmdm3929bno3b3====","preload_batchsize":false,"preload_per_page":false,"locktime":840,"usedraft":1,"text_btn_show":"Show page","templatename":"dokuwiki-light-export"},"act":"show","ajax":"ajax","move_renameokay":true,"plugin_folded":{"hide":"hide","reveal":"reveal"}};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../lib/exe/jquery.php.t.dokuwiki-light-export.js"></script>
<script type="text/javascript" charset="utf-8" src="../lib/exe/js.php.t.dokuwiki-light-export.js"></script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../favicon.ico" />
<link rel="apple-touch-icon" href="../apple-touch-icon.png" />
    </head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki-light-export loggedIn    ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

        <h1><a href="../start.html"  title="Workcraft start page"><img src="../logo.png" width="327" height="57" alt="" /></a></h1>
    
    <div class="tools group">
        <!-- USER TOOLS -->
<!--
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="start.html"  class="action admin" rel="nofollow" title="Admin">Admin</a></li><li><a href="start.html"  class="action profile" rel="nofollow" title="Profile">Profile</a></li><li><a href="start.html"  class="action logout" rel="nofollow" title="Log Out">Log Out</a></li>                </ul>
            </div>
        -->

        <!-- SEARCH TOOLS -->
<!--
        <div id="dokuwiki__searchtools">
            <h3 class="a11y"></h3>
            <form action="../start.html" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" placeholder="Search" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><button type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>        </div>
-->

        <!-- SITE TOOLS -->
<!--
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
                            <div class="mobileTools">
                    <form action="..//doku.html.doku.php.html" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="help:circuit:start" /><input type="hidden" name="sectok" value="93a422bdf3350593a5de08c7c89e72f5" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Edit this page</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Changes</option><option value="media">Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="logout">Log Out</option><option value="profile">Profile</option><option value="admin">Admin</option></optgroup></select><button type="submit">&gt;</button></div></form>                </div>
                <ul>
                    <li><a href="start.html"  class="action recent" accesskey="r" rel="nofollow" title="Changes [R]">Changes</a></li><li><a href="start.html"  class="action media" rel="nofollow" title="Manager">Manager</a></li><li><a href="start.html"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>                </ul>
                    </div>
-->
    </div>

    <!-- BREADCRUMBS -->
<!--
    -->



    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>help:circuit:start</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <div class="plugin_fastwiki_marker" style="display:none"></div><!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#capturing">Capturing</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#functional_components">Functional components</a></div></li>
<li class="level2"><div class="li"><a href="#input_and_output_ports">Input and output ports</a></div></li>
<li class="level2"><div class="li"><a href="#connections">Connections</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="#editing">Editing</a></div></li>
<li class="level1"><div class="li"><a href="#simulation">Simulation</a></div></li>
<li class="level1"><div class="li"><a href="#verification">Verification</a></div></li>
<li class="level1"><div class="li"><a href="#initialisation_analyser">Initialisation analyser</a></div></li>
<li class="level1"><div class="li"><a href="#cycle_analyser">Cycle analyser</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 id="digital_circuit_plugin">Digital Circuit plugin</h1>
<div class="level1">
<div class="plugin_include_content plugin_include__help:core:familiarise_hint" id="plugin_include__help__core__familiarise_hint">
<div class="wrap_tip wrap_round plugin_wrap">
<p>
Familiarise yourself with <a href="../core/start.html" class="wikilink1" title="help:core:start">Workcraft interface</a> to learn its common features that are available for all plugins.
</p>
</div></div>

<p>
This plugin is intended for capturing, simulation and verification of asynchronous digital circuits. For simulation and verification the circuit is automatically translated into a Signal Transition Graph (<abbr title="Signal Transition Graph">STG</abbr>) that allows re-using the features of the <a href="../stg/start.html" class="wikilink1" title="help:stg:start">STG plugin</a>.
</p>

</div>

<h2 id="capturing">Capturing</h2>
<div class="level2">

<p>
In order to create a circuit model choose <em>File→Create work…</em> menu item and in the <em>New work</em> dialogue select <em>Digital Circuit</em> as the model type.
</p>

<p>
<img src="new_work.png" class="mediacenter" title="New work of Signal Transition Graph type" alt="New work of Signal Transition Graph type" />
</p>

</div>

<h3 id="functional_components">Functional components</h3>
<div class="level3">

<p>
The main building blocks of a digital circuit are functional components that can be created with the function generator <img src="editor_tools-function.png" class="media" title="[F] Function" alt="[F] Function" />. Initially a generated component has only a single output pin (<code><span style='color:blue; '>z0</span></code> by default). New pins can be added through the <em>Add output</em> or <em>Add input</em> items of the popup menu (accessible by right-clicking the component). The pin name and type can be changed in the property editor – see <em>Name</em> and <em>I/O type</em> properties respectively.
</p>

<p>
<img src="component.png" class="mediacenter" title="Generating a new component" alt="Generating a new component" />
</p>

<p>
Initially the output pin has neither set nor reset functions assigned. The set/reset functions can be specified by selecting the output pin and entering the corresponding <a href="../core/boolean_expression.html" class="wikilink1" title="help:core:boolean_expression">Boolean expressions</a> in the <em>Set function</em> and <em>Reset function</em> entries of the property editor. Note that if a component has a single output pin (which if is the majority of logic gates) then the set/reset functions can be also modified in the properties of the component.
</p>

<p>
<img src="function.png" class="mediacenter" title="Assigning set/reset functions" alt="Assigning set/reset functions" />
</p>

<p>
A component visualisation is defined by its <em>Render type</em> selected in the property editor, as follows:
</p>
<ul>
<li class="level"><div class="li">
 <em>Box</em> – the component is visualises as a box with explicitly named pins and their set and reset functions rendered next to them. This render type is convenient when a component has more than one output or its set/reset functions are too complex.
</div></li>
</ul>

<ul>
<li class="level"><div class="li">
 <em>Gate</em> – the set and reset functions of a single component output are visualised using the traditional graphical mnemonics for Boolean operations. The obtained result is free of textual information (even the pins are not labelled) and therefore is usually easier to comprehend. Rendering a component as gate is convenient when it has a single output with relatively simple set/reset functions. This is the default rendering type with the following visualisation rules:
</div><ul>
<li class="level"><div class="li">
 If both set and reset functions are specified then the component is rendered as a C-element. 
</div></li>
<li class="level"><div class="li">
 If only the set function is specified, then the reset function is assumed to be complimentary and the component is rendered as a combinational gate (possibly with several layers of logic). 
</div></li>
<li class="level"><div class="li">
 If the component cannot be rendered as a gate, e.g. because its set function is not empty or it has several output pins, then the <em>Box</em> visualisation is used.
</div></li>
</ul>
</li>
</ul>


<p>
<img src="function-render_type.png" class="mediacenter" title="Function rendered as a gate and as a box" alt="Function rendered as a gate and as a box" />
</p>
<div class="wrap_info wrap_round plugin_wrap">
<p>
Usually it is not necessary to explicitly create input pins. When a <em>Set function</em> or <em>Reset function</em> is entered for an output pin, the missing input pins are automatically created for all the literals in the <a href="../core/boolean_expression.html" class="wikilink1" title="help:core:boolean_expression">Boolean expressions</a>. Note that the input pins do not disappear if they become unneeded after modification of the set/reset functions. You may need to manually remove those pins by first selecting them and then pressing <kbd class="__keyboard">Delete</kbd> button.
</p>
</div>
</div>

<h3 id="input_and_output_ports">Input and output ports</h3>
<div class="level3">

<p>
Other building blocks of a digital circuit are its primary input and output ports. These are used to interact with the circuit environment. The ports are created with the port generator <img src="editor_tools-port.png" class="media" title="[P] Input/Output port" alt="[P] Input/Output port" /> – just activate this editor tool and click the editor panel in a position you want to place the port. By default an output port is created, however, if you hold <kbd class="__keyboard">Shift</kbd> while clicking the editor panel then an input port is created. Note that you can change the of existing port <em>I/O type</em> in the property editor too.
</p>

<p>
<img src="ports.png" class="mediacenter" title="Input and output ports" alt="Input and output ports" />
</p>

</div>

<h3 id="connections">Connections</h3>
<div class="level3">

<p>
When the connection tool <img src="../core/editor_tools-connect.png" class="media" title="[C] Connect" alt="[C] Connect" /> is active you can connect  the pins of the circuit components and primary ports. The output pins and the input ports can be connected either to the input pins or to the output ports. Several connections may start at the same output pin or an input port, however, only a single connection can end up at an input pin or an output port.  If an incorrect connection is attempted (e.g. a connection from an input pin to an output port or more than one connections to an input pin) then a warning message will be issued.
</p>

<p>
<img src="connection-invalid.png" class="mediacenter" title="Invalid connection" alt="Invalid connection" />
</p>

<p>
In order to reduce the number of arcs going from the same output pin (or an input port) and simplify the layout of the connection arc, one can “fork” the wires – just start a connection from an existing wire and a joint point will be automatically created. New connections can be also started from the existing joint points.
</p>

<p>
<img src="connection-fork.png" class="mediacenter" title="Connections with forks" alt="Connections with forks" />
</p>

</div>

<h2 id="editing">Editing</h2>
<div class="level2">

<p>
For editing the model activate the selection tool <img src="../core/editor_tools-select.png" class="media" title="[S] Select" alt="[S] Select" />. All the standard editing features (select, drag-and-drop, delete, copy, undo, group, etc.) work the same – see generic help on <a href="../core/tool_controls.html#selection_controls" class="wikilink1" title="help:core:tool_controls">Selection controls</a> and <a href="../core/property_editor.html" class="wikilink1" title="help:core:property_editor">Property editor</a> for details. 
</p>

<p>
Similar to all the other models, textual comments can be created by activating the <img src="../core/editor_tools-text_note.png" class="media" title="[N] Text Note" alt="[N] Text Note" /> tool and clicking the editor panel in the position you want to put the text. Double-click on the note box to edit its text label in-place or do it through the property editor panel when the note is selected.
</p>

</div>

<h2 id="simulation">Simulation</h2>
<div class="level2">

<p>
For simulation of a Digital Circuit model activate the simulation tool <img src="../core/editor_tools-simulate.png" class="media" title="[M] Simulate" alt="[M] Simulate" />. The enabled pins and ports are highlighted and can be activated by clicking them. The simulation tool controls provide the means for analysis and navigation through the simulation trace, see generic help on <a href="../core/tool_controls.html#simulation_controls" class="wikilink1" title="help:core:tool_controls">Simulation controls</a> for details. The circuit simulation is just an abstraction over the simulation of an automatically generated <abbr title="Signal Transition Graph">STG</abbr> representation of the circuit components. Therefore all the specifics of <a href="../stg/start.html#simulation" class="wikilink1" title="help:stg:start">STG simulation</a> also apply to the Digital Circuit plugin.
</p>

<p>
The state of circuit&#039;s signals is visualised by colouring the corresponding pins and wires either <span style='color:blue; '>blue</span> (for logical <code>0</code>) or <span style='color:red; '>red</span> (logical <code>1</code>). Circuit pins associated with excited signals are highlighted and can be clicked to progress to the next state.
</p>

<p>
By default the circuit driver pins (input ports and the gate output contacts) are initialised to logical <code>0</code>. This may lead to some of the circuit internal signals being excited when the simulation begins, e.g. the output <code>out0</code> is <code>0</code>, but evaluates to <code>1</code> (first transition in the simulation trace). There are two ways to change the initial values to the circuit signals:
</p>
<ul>
<li class="level"><div class="li">
 A driver pin can be set to logical <code>1</code> by ticking the <em>Init to one</em> property of the pin.
</div></li>
<li class="level"><div class="li">
 Alternatively, in simulation mode, when a desired association of signal values is reached, this state can be saved as the initial state of the circuit by pressing this button – <img src="../core/tool_controls-simulate-save_state.png" class="media" title="Save current state as initial" alt="Save current state as initial" />.
</div></li>
</ul>


<p>
<img src="simulation.png" class="mediacenter" title="Circuit simulation" alt="Circuit simulation" />
</p>

<p>
A circuit simulation trace can be converted to a <em>Digital Timing Diagram</em> by the generator of trace diagram <img src="../core/tool_controls-simulate-generate_trace_diagram.png" class="media" title="Generate trace diagram" alt="Generate trace diagram" />. The order, visibility, and color of signal waveforms are specified in the signal state table – see <a href="../stg/start.html#simulation" class="wikilink1" title="help:stg:start">STG simulation</a> help for details.
</p>

<p>
<img src="simulation-trace_diagram.png" class="mediacenter" title="Timing diagram for circuit simulation trace" alt="Timing diagram for circuit simulation trace" />
</p>

</div>

<h2 id="verification">Verification</h2>
<div class="level2">

<p>
Verification of a digital circuit is usually made in the context of its environment. The environment can be described as an <abbr title="Signal Transition Graph">STG</abbr> and attached to the circuit model using the property editor when no nodes are selected. 
</p>

<p>
When a verification task is issued via the <em>Verification</em> menu, the circuit is first translated into an <abbr title="Signal Transition Graph">STG</abbr> that is subsequently composed with the <abbr title="Signal Transition Graph">STG</abbr> of the environment. The resultant <abbr title="Signal Transition Graph">STG</abbr> is used for verification of the desired properties:
</p>
<ul>
<li class="level"><div class="li">
 <em>Conformation [MPSat]</em> – verify if the circuit conforms to the environment   specification.
</div></li>
<li class="level"><div class="li">
 <em>Deadlock freeness [MPSat]</em> – verify if the circuit is deadlock-free.
</div></li>
<li class="level"><div class="li">
 <em>Output persistency [MPSat]</em> – verify if the circuit is output-persistent.
</div></li>
<li class="level"><div class="li">
 <em>Conformation, deadlock freeness, output persistency (reuse unfolding) [MPSat]</em> – verify if the circuit conforms to the environment specification, is deadlock-free and output-persistent under the given environment.
</div></li>
</ul>


</div>
<div class="level1">
<div class="plugin_include_content plugin_include__help:circuit:initialisation" id="plugin_include__help__circuit__initialisation">

<h2 id="initialisation_analyser">Initialisation analyser</h2>

<p>
Initialisation (or reset) of a speed-independent circuit is an important part of the design process because a circuit can malfunction if its initial state is incorrect. Note that the initialisation phase of a speed-independent circuit does not have to be speed-independent: It is assumed that there is a special <code><span style='color:red; '>reset</span></code> signal that is generated externally and behaves as follows:
</p>
<ul>
<li class="level"><div class="li">
 When the power is connected, <code><span style='color:red; '>reset</span></code> is low.
</div></li>
<li class="level"><div class="li">
 It stays low for sufficiently long time to complete the initialisation of all gates.
</div></li>
<li class="level"><div class="li">
 Eventually <code><span style='color:red; '>reset</span></code> goes high, at which point the circuit is already correctly initialised and the normal speed-independent operation begins.
</div></li>
<li class="level"><div class="li">
 <code><span style='color:red; '>reset</span></code> stays high for the whole time of circuit normal operation. 
</div></li>
</ul>


<p>
There are several ways of circuit initialisation that can be used in combination:
</p>
<ul>
<li class="level"><div class="li">
 Rely on the initial state of some of the inputs (which are guaranteed to be correctly initialised by the environment). They propagate through some of the logic gates to initialise some of the internal and output signals.
</div></li>
<li class="level"><div class="li">
 Substitute some of the gates with ones containing an extra input that can act as a set or reset pin.
</div></li>
<li class="level"><div class="li">
 Insert additional gates to explicitly initialise the internal and output signals. Such gates will act as buffers during the normal operation, so one has to be careful not to break any <em>isochronic forks</em>.
</div></li>
</ul>


<p>
<em>Initialisation analyser</em> <img src="editor_tools-initialisation_analysis.png" class="media" title="[I] Initialisation analyser" alt="[I] Initialisation analyser" /> tool is designed to aid the decision of how to reset a speed-independent circuit. The tool uses <em>Init to one</em> and <em>Forced init</em> properties of circuit signals (i.e. primary input ports and output pins of circuit components):
</p>
<ul>
<li class="level"><div class="li">
 <em>Init to one</em> property defines the initial state of the signal. If a circuit is synthesised by one of the backend tools, then the initial state of all its signals is set automatically. However, if the circuit is manually altered, then the designer is responsible for specifying the initial states of the signals.
</div></li>
<li class="level"><div class="li">
 <em>Forced init</em> property defines if the signal is known to be in a correct initial state. For a primary input it means the environment takes care of initialising the signal to its expected state.  For a  component output pin it means that the necessary circuitry will be added to properly initialise that pin.
</div></li>
</ul>


<p>
These properties can be viewed and modified in the <em>Property editor</em> when an input port or an output pin is selected. Note that selecting a single-output component (i.e. a gate) also reveals these properties of its only output pin. Note that <em>zero delay</em> gates hide <em>Force init</em> property as these gates should not be modified.
</p>

<p>
<em>Initialisation analyser</em> uses these properties as follows. It considers the signals whose <em>Forced init</em> property is set as <em>initialised</em>, while the remaining signals are assumed as <em>uninitialised</em>. The tool tries to evaluate each <em>uninitialised</em> signal on the <em>Init to one</em> property of <em>initialised</em> signals. If the Boolean value of a signal can be derived, then it is said to have <em>propagated initial state</em> and the signal is also considered <em>initialised</em>. The tool repeats evaluation of <em>uninitialised</em> signals until no further progress can be made, i.e. no new <em>initialised</em> signals can be obtained. At this stage, if some signals are still <em>uninitialised</em> it means <em>Forced init</em> property of the circuit signals needs to be adjusted, until all the signals are successfully initialised.
</p>

<p>
Sometimes the correct initial state of a signal cannot be achieved and the signal is said to have <em>initialisation problem</em>. There are two sources of initialisation problems:
</p>
<ul>
<li class="level"><div class="li">
 <em>Conflict of initialisation</em>, which happens when the propagated initial state of a signal does not match its <em>Init to one</em> property. This often indicates a mistake, e.g. incorrect initial value of the signal, however, there are legitimate situations where such conflicts can occur.
</div></li>
<li class="level"><div class="li">
 <em>Unreachable initial state</em>, which happens with sequential (self-dependent) signals whose expected initial state cannot be reached by assigning the component inputs.
</div></li>
</ul>


<p>
In both cases such a problematic signal needs to be explicitly initialised by setting its <em>Forced init</em> property.
</p>

<p>
<em>Initialisation analyser</em> visualises the initialisation state using the <em>Gate highlight legend</em> shown in the <em>Tool controls</em>:
</p>

<p>
<img src="tool_controls-initialisation.png" class="mediacenter" alt="" />
</p>

<p>
By default the highlighting scheme for circuit components is as follows (the colours can be adjusted in the preferences of digital circuit model – see <em>Edit→Preferences…→Decoration→Analysis</em>):
</p>
<ul>
<li class="level"><div class="li">
 Components whose initial state cannot be determined via propagation of <em>forced</em> signals are not highlighted (i.e. remain white).
</div></li>
<li class="level"><div class="li">
 Zero delay components, which must not be modified by reset insertion, are highlighted <span style='color:grey; '> grey</span>.
</div></li>
<li class="level"><div class="li">
 Components with initialisation problems (conflict of initialisation or unreachable initial state) are highlighted <span style='color:magenta; '> magenta</span>.
</div></li>
<li class="level"><div class="li">
 Components whose pins have <em>Forced init</em> property set are highlighted <span style='color:orange; '>orange</span>.
</div></li>
<li class="level"><div class="li">
 Correctly initialised components are highlighted <span style='color:lime; '>green</span>.
</div></li>
</ul>


<p>
The pins and ports are coloured according to their initialisation state (<span style='color:red; '>red</span> for high level and <span style='color:blue; '>blue</span> for low level), as follows:
</p>
<ul>
<li class="level"><div class="li">
 The pin outline color indicates the <em>expected</em> initialisation state defined by the <em>Init to one</em> property, while its background color reflects the actual <em>propagated</em> initialisation state. In case of a mismatch (the propagated value differs from the expected one) the problematic pin can be easily identified by its different outline and background colours.
</div></li>
<li class="level"><div class="li">
 Output pins whose <em>Forced init</em> property is set are visualised by diamond shape. The initial state of such pins is forced to the <em>expected</em> value, according to their <em>Init to one</em> property.
</div></li>
</ul>


<p>
The color scheme for wires is as follows:
</p>
<ul>
<li class="level"><div class="li">
 Wires of <em>uninitialised</em> signals are coloured black.
</div></li>
<li class="level"><div class="li">
 Wires of <em>initialised</em> signals are coloured <span style='color:red; '>red</span> or <span style='color:blue; '>blue</span> according to their initial state.
</div></li>
</ul>


<p>
<em>Force init pins</em> table enumerates the pins whose <em>Forced init</em> property is set. Note that <em>Forced init</em> property of a signal can be toggled while in <em>Initialisation analyser</em> tool by clicking the corresponding input port, output pin, or a gate. This enables convenient exploration of possible reset strategies. The tool also provides several ways of changing <em>Force init</em> property for a group of contacts:
</p>
<ul>
<li class="level"><div class="li">
 <img src="tool_controls-initialisation-input_port.png" class="media" title="Force init all input ports (environment responsibility)" alt="Force init all input ports (environment responsibility)" /> - Tag <em>Forced init</em> property for all input ports. Note that it is the environment responsibility to guarantee the correct initialisation of primary inputs whose <em>Forced init</em> property is set.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-initialisation-problematic.png" class="media" title="Force init output pins with problematic initial state" alt="Force init output pins with problematic initial state" /> - Tag <em>Forced init</em> property for all output pins with problematic initial state.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-initialisation-sequential.png" class="media" title="Force init output pins of sequential gates" alt="Force init output pins of sequential gates" /> - Tag <em>Forced init</em> property for output pins of all sequential gates.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-initialisation-tag_necessary.png" class="media" title="Auto-append force init pins as necessary to complete initialisation" alt="Auto-append force init pins as necessary to complete initialisation" /> - Set <em>Forced init</em> property of output pins as necessary to complete initialisation of the circuit.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-initialisation-untag_redundant.png" class="media" title="Auto-discard force init pins that are redundant for initialisation" alt="Auto-discard force init pins that are redundant for initialisation" /> - Clear <em>Forced init</em> property of output pins that are redundant for the circuit initialisation.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-initialisation-clear_all.png" class="media" title="Clear all force init ports and pins" alt="Clear all force init ports and pins" /> - Clear <em>Forced init</em> property for all input ports and output pins.
</div></li>
</ul>


<p>
Circuit initialisation comprises three steps:
</p>
<ol>
<li class="level"><div class="li">
 <strong>Reset exploration</strong> – Decide which signals should be forced to the initial state, so that the correct initial values propagate to the remaining circuit components. Selecting a good set of forced signals is a creative process with multiple optimisation targets (avoiding critical paths, circuit size, gate complexity, etc.) and relies on designer experience.
</div></li>
<li class="level"><div class="li">
 <strong>Reset insertion</strong> – Insert the reset port <code><span style='color:red; '>reset</span></code>, set its <em>Init to one</em> property according to the reset active state (<em>false</em> for active low, <em>true</em> for active high), and use it to initialise all the signals that have <em>Force init</em> property set.
</div></li>
<li class="level"><div class="li">
 <strong>Reset validation</strong>  – Clear <em>Force init</em> property of all component pins and input ports, set <em>Force init</em> property for the reset port, and check that all the circuit components are correctly initialised.
</div></li>
</ol>

</div>

<p>
Consider our slightly modified circuit example with a zero delay inverter inserted before a NAND gate input. All the signals (except for the output of zero delay inverter) are initially <em>expected</em> (but not <em>guaranteed</em>!) to be <code>0</code>, i.e. none of the driver pins have their <em>Init to one</em> property set.  Let us explore initialisation strategies by activating <em>Initialisation analyser</em> <img src="editor_tools-initialisation_analysis.png" class="media" title="[I] Initialisation analyser" alt="[I] Initialisation analyser" />:
</p>

<p>
<img src="initialisation-undefined.png" class="mediacenter" title="Undefined initialisation state" alt="Undefined initialisation state" />
</p>

<p>
Notice that zero delay inverter is shaded in <span style='color:grey; '>grey</span> and its initial state cannot be forced, i.e. it is a don&#039;t touch component. As no <em>Forced init</em> property is set there is no <em>propagated</em> initial state, however, gate <code>g0</code> is highlighted in <span style='color:magenta; '>magenta</span> as <em>problematic</em>. Indeed, its output <em>expected</em> initial state is <em>low</em>, but its Boolean function evaluates to <em>high</em> when applied to the expected state of inputs. To resolve such initialisation problem the initial state of problematic pins have to be <em>forced</em>. Click gate <code>g0</code> of press <img src="tool_controls-initialisation-problematic.png" class="media" title="Force init output pins with problematic initial state" alt="Force init output pins with problematic initial state" /> button to set <em>Force init</em> property of <code>g0</code> output pin – its highlighting color should change to <span style='color:orange; '>orange</span> indicating that it is the designers responsibility to force this gate to the expected state.
</p>

<p>
Let us assume that circuit&#039;s environment <em>forces</em> all the input ports to be in the <em>expected</em> state and indicate this by setting their <em>Forced init</em> property. This can be achieved by either clicking each input port, or by pressing <img src="tool_controls-initialisation-input_port.png" class="media" title="Force init all input ports (environment responsibility)" alt="Force init all input ports (environment responsibility)" /> button. The result should be as follows:
</p>

<p>
<img src="initialisation-forced.png" class="mediacenter" title="Forced initial state" alt="Forced initial state" />
</p>

<p>
One can see that the C-element <code>g1</code> has been properly initialised via its inputs – it is highlighted in <span style='color:green; '>green</span>. The output of <code>g0</code> is forced to its initial state – it is highlighted in <span style='color:orange; '>orange</span>.
</p>

<p>
Now the circuit does not have any initialisation conflicts, however, its gate <code>g0</code> needs to be explicitly reset. This can be done automatically by pressing either <em>Insert reset (active-high)</em> or <em>Insert reset (active-low)</em> button. Here is a result of inserting active-high reset – <code>g0</code> function is automatically modified to be resetable to <code>0</code>, an input port <code><span style='color:red; '>reset</span></code> is added and connected to the new pin of <code>g0</code>:
</p>

<p>
<img src="initialisation-reset.png" class="mediacenter" title="Insertion of reset logic" alt="Insertion of reset logic" />
</p>

<p>
Now the circuit is correctly initialised via its primary inputs – all the gates are highlighted in <span style='color:lime; '>green</span> to indicate this. Note that the newly inserted <code><span style='color:red; '>reset</span></code> port is constrained by its set and reset functions, therefore the circuit can be verified against the original environment <abbr title="Signal Transition Graph">STG</abbr> without reset signal.
</p>

</div>
<div class="level1">
<div class="plugin_include_content plugin_include__help:circuit:loop_breaking" id="plugin_include__help__circuit__loop_breaking">

<h2 id="cycle_analyser">Cycle analyser</h2>

<p>
Combinational cycles are common in asynchronous circuits – they (along with latches) usually implement “memory” of the circuit. Verilog netlist for such cyclic circuits, however, may upset conventional EDA tools for timing analysis (e.g. Synopsys PrimeTime) and offline testing (e.g. Synopsys TetraMAX):
</p>
<ul>
<li class="level"><div class="li">
 Static timing analysis requires the circuit to be free of combinational cycles and breaks them by disabling some of the timing arcs. The choice of the timing arcs to disable, however, is often difficult to predict and suboptimal, and in particular may cause removal of timing paths that are important for timing analysis, e.g. critical paths.
</div></li>
</ul>

<ul>
<li class="level"><div class="li">
 Offline testing may also be affected by the combinational cycles as they limit the <em>controlability</em> of the circuit – the ability to set every signal to a specific state via the circuit&#039;s primary inputs.
</div></li>
</ul>


<p>
Workcraft introduces a <em>Path breaker</em> property for the component pins to explicitly break the combinational cycles. Interpretation of this property differs for the input and output pins of a gate:
</p>
<ul>
<li class="level"><div class="li">
 For each <strong>input pin</strong> whose <em>Path breaker</em> property is set, a <code>set_disable_timing</code> constraint is generated – it disables the timing arcs from that input pin, thus removing timing paths through the pin. These constraints can be dumped into an SDC file and subsequently used to explicitly instruct a timing analysis tool to disable specific timing arcs, rather than rely on its unpredictable arc selection algorithm. Careful selection of the timing arcs for disabling may help to break all the combinational cycles in the circuit while preserving the important/interesting timing paths. This requires creativity from the designer and is not always possible.
</div></li>
</ul>

<ul>
<li class="level"><div class="li">
 For each <strong>output pin</strong> whose <em>Path breaker</em> property is set, a special element called <em>testable buffer</em> or <em>testable inverter</em> is inserted. Such testable elements need to be designed and characterised for each gate library, so the timing analysis tool is aware of their path breaking capability. Moreover, the testable elements can be further extended with SCAN features, making asynchronous design compatible with conventional DfT methodology <a href="#refnotes:1:note1" name="refnotes:1:ref1" class="refnotes-ref note-popup">[1]</a>.
</div></li>
</ul>


<p>
Note that both ways of dealing with combinational cycles can be combined in the same circuit. 
</p>

<p>
<em>Cycle analyser</em> <img src="editor_tools-cycle_analysis.png" class="media" title="[Y] Cycle analyser" alt="[Y] Cycle analyser" /> tool provides a convenient <abbr title="Graphical User Interface">GUI</abbr> for exploration of loop breaking alternatives. It automates the removal of combinational cycles and the insertion of testing features in asynchronous circuits. <em>Cycle analyser</em> control panel looks as follows:
</p>

<p>
<img src="tool_controls-loop_breaking.png" class="mediacenter" alt="" />
</p>

<p>
When the tool is activated, the circuit gates are highlighted using the following scheme (the colours can be adjusted in the preferences of digital circuit model – see <em>Edit→Preferences…→Decoration→Analysis</em>):
</p>
<ul>
<li class="level"><div class="li">
 Zero delay gates and their output pins are highlighted <span style='color:grey; '> grey</span>. This is to indicate that zero delay gates cannot be delayed by inserting testable buffers. Input pins of zero delay gates can still be set as path breakers though.
</div></li>
<li class="level"><div class="li">
 Components and pins that lay on a cycle are highlighted <span style='color:magenta; '> magenta</span>.
</div></li>
<li class="level"><div class="li">
 Pins whose <em>Path breaker</em> property is set are highlighted <span style='color:orange; '>orange</span>. Components with path breaker pins are also highlighted <span style='color:orange; '>orange</span>.
</div></li>
<li class="level"><div class="li">
 Components and pins that do not belong to any cycle are highlighted <span style='color:lime; '>green</span>.
</div></li>
</ul>


<p>
<em>Path breakers</em> table enumerates the pins whose <em>Path breaker</em> property is set. Note that <em>Path breaker</em> property of a pin can be toggled while in <em>Cycle analyser</em> tool by clicking the corresponding pin; clicking on a gate toggles <em>Path breaker</em> property of its only output. The change is immediately visualised via updated highlighting of components and pins. This enables convenient exploration of possible cycle breaking strategies.
</p>

<p>
<em>Cycle analyser</em> also provides several ways of changing <em>Path breaker</em> property for a group of output pins (input pins are not affected by these actions):
</p>
<ul>
<li class="level"><div class="li">
 <img src="tool_controls-loop_breaking-self_loop.png" class="media" title="Path breaker all self loops" alt="Path breaker all self loops" /> - Tag <em>Path breaker</em> property for output pins of components with feedback loops. Note that feedback loops via zero-delay inverters or buffers are also included.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-loop_breaking-tag_necessary.png" class="media" title="Auto-append path breaker pins as necessary to complete cycle breaking" alt="Auto-append path breaker pins as necessary to complete cycle breaking" /> - Set <em>Path breaker</em> property of output pins as necessary to break all the cycles in the circuit.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-loop_breaking-untag_redundant.png" class="media" title="Auto-discard path breaker pins that are redundant for cycle breaking" alt="Auto-discard path breaker pins that are redundant for cycle breaking" /> - Clear <em>Path breaker</em> property of output pins that are redundant for breaking all cycles in the circuit.
</div></li>
<li class="level"><div class="li">
 <img src="tool_controls-loop_breaking-clear_all.png" class="media" title="Clear all path breaker pins" alt="Clear all path breaker pins" /> - Clear <em>Path breaker</em> property for all the pins.
</div></li>
</ul>


<p>
Once all the cycles are broken by strategically assigning the <em>Path breaker</em> property to the pins, the buttons at the bottom of the tool panel are used as follows:
</p>
<ul>
<li class="level"><div class="li">
 <strong>Insert TBUF/TINV</strong>  – insert testable buffers/inverters after output pins with <em>Path breaker</em> property set. Note that insertion of testable buffers is optimised as follows: If the path breaker pin belongs to a buffer (inverter), or if the only gate it drives is a buffer (inverter), then, instead of inserting a new testable gate, that buffer (inverter) is converted into the testable buffer(testable inverter).
</div></li>
</ul>

<div class="wrap_info wrap_round wrap_center plugin_wrap" style="width: 90%;">
<p>
By default the testable buffer gate is <code>TBUF</code> with input <code>I</code> and output <code>O</code>; testable inverter gate is <code>TINV</code> with <code>I</code> and <code>ON</code> pins. These names can be changed in <em>Edit→Preferences…→Models→Digital Circuit</em> preferences via <em>Testable buffer name and input-output pins</em> and <em>Testable inverter name and input-output pins</em> settings.
</p>
</div><ul>
<li class="level"><div class="li">
 <strong>Insert SCAN</strong> – insert SCAN ports and connect them to the <em>testable buffers</em>.
</div></li>
</ul>

<div class="wrap_info wrap_round wrap_center plugin_wrap" style="width: 90%;">
<p>
When connecting a gate to scan ports its module name is automatically changed by adding <code>_SCAN</code> suffix. This default suffix can be changed in <em>Edit→Preferences…→Models→Digital Circuit</em> preferences via <em>Scan module suffix</em> setting. By default SCAN primary inputs are called <code>scanck</code>, <code>scanen</code>, <code>scanin</code>, and <code>scanout</code> while the corresponding pins of testable gates are <code>CK</code>, <code>SE</code>, <code>SI</code>, and <code>SO</code> (the latter is only used in multi-output components). These names can also be changed in <em>Edit→Preferences…→Models→Digital Circuit</em> preferences via <em>Scan clock port / pin names</em>, <em>Scan enable port / pin names</em>, <em>Scan input port / pin names</em> and <em>Scan output poert / pin (for multi-output component) names</em> settings.
</p>
</div><ul>
<li class="level"><div class="li">
 <strong>Write SDC…</strong> – write out an SDC file with <code>set_disable_timing</code> constraints for each input pin with <em>Path breaker</em> property set. This button is disabled if there are no input pins with <em>Path breaker</em> property set.
</div></li>
</ul>

<div class="wrap_info wrap_round wrap_center plugin_wrap" style="width: 90%;">
<p>
By default the produced SDC file uses the names of gates and pins as they are defined in the <em>Property editor</em> for the corresponding nodes. If necessary, these names can be substituted by providing a conversion file in <em>Edit→Preferences…→Models→Digital Circuit</em> preferences via <em>Substitution rules for export</em> setting. For example, <code>libraries/workcraft-tsmc_ghp.cnv</code> file has rules to convert <code>librarys/workcraft.lib</code> gates to match the naming convention of TSMC GHP library. This is a convenient way to convert a circuit (and its constraints) mapped into one gate library to be used with another library.
</p>
</div>

<div class="refnotes">
<hr>
<div class="notes">
<div class="note left">
<b><a name="refnotes:1:note1" class="nolink">[1]</a></b>
<span id="refnotes:1:note1:text">
D. Lloyd, R. Illman: <em>“Scan insertion and ATPG for C-gate based
asynchronous designs”</em>, in Synopsys User Group (SNUG), 2014.
</span></div>
</div>
</div>
</div>

</div>

                    <!-- wikipage stop -->
                                    </div>
<!--
                                    <div class="docInfo"><bdi>help/circuit/start.txt</bdi> · Last modified: 2019/07/03 16:24 by <bdi>danil</bdi></div>
                -->

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
<!--
            <div id="dokuwiki__pagetools">
                            <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="start.html"  class="action edit" accesskey="e" rel="nofollow" title="Edit this page [E]"><span>Edit this page</span></a></li><li><a href="start.html"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="start.html"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="start.html"  class="action export_pdf" rel="nofollow" title="Export to PDF"><span>Export to PDF</span></a></li><li class="plugin_move_page"><a href="start.html"><span>Rename Page</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li><li><a href="start.html"  class="action siteexport_addpage" title="Export Page (Siteexport)"><span>Export Page</span></a></li><li><a href="javascript:void(0);" class="fold_unfold_all" onclick="fold_unfold_all();" rel="nofollow" title="Fold/unfold all"><span>Fold/unfold all</span></a></li><li><a href="start.html"  class="action siteexport_mapid" title="Show Map-ID"" data-mapid="start" onclick="copyMapIDToClipBoard.call(this); return false;"><span>Copy Map-ID: <span class="mapID" data-done="Done.">start</span></span></a></li>                    </ul>
                </div>
                        </div>
-->
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
<!--
    
    <div class="buttons">
                <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://php.net" title="Powered by PHP" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../lib/tpl/dokuwiki-light-export/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
    <div class="userInfo">
        Logged in as:: workcraft    </div>
-->
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img  width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div></body>
</html>
