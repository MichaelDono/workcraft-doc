<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>help:synthesis - Workcraft</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="help,synthesis"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.html" title="Workcraft"/>
<link rel="start" href="synthesis.html"/>
<link rel="contents" href="synthesis.html" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Changes" />
<link rel="alternate" type="application/rss+xml" title="Current namespace" />
<link rel="edit" title="Edit this page" href="synthesis.html"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="_export/xhtml/help/synthesis.xhtml"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="_export/raw/help/synthesis.raw"/>
<link rel="canonical" href="https://workcraft.org/help/synthesis"/>
<link rel="stylesheet" type="text/css" href="lib/exe/css.php.t.dokuwiki-light-export.css"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='help';var SIG=' --- //[[support@workcraft.org| ]] 2019/07/30 12:25//';var JSINFO = {"id":"help:synthesis","namespace":"help","fastwiki":{"secedit":1,"preview":1,"fastpages":1,"save":0,"fastshow":0,"fastshow_same_ns":1,"fastshow_include":"","fastshow_exclude":"","preload":false,"preload_head":"====47hsjwycv782nwncv8b920m8bv72jmdm3929bno3b3====","preload_batchsize":false,"preload_per_page":false,"locktime":840,"usedraft":1,"text_btn_show":"Show page","templatename":"dokuwiki-light-export"},"act":"show","ajax":"ajax","move_renameokay":true,"plugin_folded":{"hide":"hide","reveal":"reveal"}};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="lib/exe/jquery.php.t.dokuwiki-light-export.js"></script>
<script type="text/javascript" charset="utf-8" src="lib/exe/js.php.t.dokuwiki-light-export.js"></script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="favicon.ico" />
<link rel="apple-touch-icon" href="apple-touch-icon.png" />
    </head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki-light-export loggedIn    ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

        <h1><a href="start.html"  title="Workcraft start page"><img src="logo.png" width="327" height="57" alt="" /></a></h1>
    
    <div class="tools group">
        <!-- USER TOOLS -->
<!--
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="synthesis.html"  class="action admin" rel="nofollow" title="Admin">Admin</a></li><li><a href="synthesis.html"  class="action profile" rel="nofollow" title="Profile">Profile</a></li><li><a href="synthesis.html"  class="action logout" rel="nofollow" title="Log Out">Log Out</a></li>                </ul>
            </div>
        -->

        <!-- SEARCH TOOLS -->
<!--
        <div id="dokuwiki__searchtools">
            <h3 class="a11y"></h3>
            <form action="start.html" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" placeholder="Search" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><button type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>        </div>
-->

        <!-- SITE TOOLS -->
<!--
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
                            <div class="mobileTools">
                    <form action="/doku.html.doku.php.html" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="help:synthesis" /><input type="hidden" name="sectok" value="63fd8f144f67cacd78ae93c6f0c4c100" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Edit this page</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Changes</option><option value="media">Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="logout">Log Out</option><option value="profile">Profile</option><option value="admin">Admin</option></optgroup></select><button type="submit">&gt;</button></div></form>                </div>
                <ul>
                    <li><a href="synthesis.html"  class="action recent" accesskey="r" rel="nofollow" title="Changes [R]">Changes</a></li><li><a href="synthesis.html"  class="action media" rel="nofollow" title="Manager">Manager</a></li><li><a href="synthesis.html"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>                </ul>
                    </div>
-->
    </div>

    <!-- BREADCRUMBS -->
<!--
    -->



    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>help:synthesis</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <div class="plugin_fastwiki_marker" style="display:none"></div><!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#representation_of_the_state_space">Representation of the state space</a></div></li>
<li class="level1"><div class="li"><a href="#resolution_of_csc_conflicts">Resolution of CSC conflicts</a></div></li>
<li class="level1"><div class="li"><a href="#logic_synthesis">Logic synthesis</a></div></li>
<li class="level1"><div class="li"><a href="#logic_decomposition_and_technology_mapping">Logic decomposition and technology mapping</a></div></li>
<li class="level1"><div class="li"><a href="#timing_assumptions">Timing assumptions</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 id="circuit_synthesis">Circuit synthesis</h1>
<div class="level1">

<p>
This is a comparative analysis of Petrify and MPSat approaches to synthesis of speed-independent circuits.
</p>

</div>

<h2 id="representation_of_the_state_space">Representation of the state space</h2>
<div class="level2">

<p>
The number of reachable states is generally exponential in the size of the <abbr title="Signal Transition Graph">STG</abbr>, which is a fundamental problem known as <em>State Space Explosion</em> (or just <em>State Explosion</em>). There is no general solution, but there are various heuristics and data structures allowing one to mitigate this problem in some practical cases.
</p>

<p>
The main difference between Petrify and MPSat is in the data structure used to represent the set of reachable states. Petrify uses <em>Binary Decision Diagrams</em> (BDD) while MPSat uses <em>Petri net unfolding prefix</em> (or just <em>Unfolding</em>) generated by PUNF. Unfoldings tend to be more efficient for “practical” STGs as these tend to have a lot of concurrency but rather few choices. However, there are no hard guarantees – one can always find examples where one technique dies and the other excels.
</p>

</div>

<h2 id="resolution_of_csc_conflicts">Resolution of CSC conflicts</h2>
<div class="level2">

<p>
This part of design flow requires inserting new signals and so a lot of creativity is required from the tool. It relies on complicated heuristics and so it is easy to find examples where one tool dies while the other completes, or when both tools complete but the quality of the results differs significantly, so there is no clear winner. Hence the advice is to try both tools and choose the better solution. There is a tutorial about <a href="tutorial/synthesis/csc-resolution/start.html" class="wikilink1" title="tutorial:synthesis:csc-resolution:start">CSC resolution</a>.
</p>

</div>

<h2 id="logic_synthesis">Logic synthesis</h2>
<div class="level2">

<p>
Logic synthesis requires CSC to be already resolved. If the <abbr title="Signal Transition Graph">STG</abbr> has CSC conflicts, Petrify will silently resolve them before proceeding to the synthesis, whereas MPSat will output an error. The gate library is completely ignored, i.e. no mapping is performed at this stage.
</p>

<p>
Always verify the derived circuits – though they are meant to be correct by construction, MPSat and Petrify are complex tools and may have bugs. 
</p>

<p>
Generally, logic synthesis is relatively straightforward (apart from the computational complexity) and no creative decisions (like how to insert new signals) have to be made at this stage. In almost all practical cases MPSat will be significantly faster, and will deliver solutions of similar or better quality to Petrify&#039;s. Also Petrify occasionally produces wrong solutions in the gC and stdC modes. Hence, the advice is to use MPSat in the following three logic synthesis modes:
</p>
<ul>
<li class="level"><div class="li">
 <strong>Complex-gate</strong> – each signal is implemented as a Boolean function of arbitrary complexity.
</div></li>
</ul>

<ul>
<li class="level"><div class="li">
 <strong>Generalised C-element synthesis</strong> – each signal is implemented by a state-holding “keeper” (two inverters as in the usual C-element) with pull-up and pull-down networks of transistors, which are not necessarily complementary. These are obtained from the Boolean set and reset functions of arbitrary complexity derived by the tools in this mode. Petrify is known occasionally to derive wrong implementations in this mode, so always verify!
</div></li>
</ul>

<ul>
<li class="level"><div class="li">
 <strong>Standard C-element synthesis</strong> – each signal is implemented by a C-element controlled by two combinational gates implementing “monotonic” set and reset functions (these are bigger than the gC set/reset functions due to the extra monotonicity constraint). Petrify is VERY BUGGY in this mode, so Workcraft does not have the corresponding entry for Petrify in its synthesis menu to discourage its use.
</div></li>
</ul>


</div>

<h2 id="logic_decomposition_and_technology_mapping">Logic decomposition and technology mapping</h2>
<div class="level2">

<p>
CSC is required to be already resolved. If the <abbr title="Signal Transition Graph">STG</abbr> has CSC conflicts, Petrify will silently resolve them before proceeding, whereas MPSat will output an error.
</p>

<p>
In this mode the tools try to map the implementation to the gate library. This is the most complicated step in the flow, which often fails. It involves inserting new signals, and so much creativity is required from the tool. Hence the advice is to try both tools and choose the better solution. 
</p>

<p>
Note that:
</p>
<ul>
<li class="level"><div class="li">
 <em>Zero delay</em> inverters are often created in this mode for technical reasons.
</div></li>
</ul>

<ul>
<li class="level"><div class="li">
 Petrify is known occasionally to derive wrong implementations in this mode, so always verify!
</div></li>
</ul>

<ul>
<li class="level"><div class="li">
 The final optimisation step involving pushing the bubbles around (with the view to reduce the number of inverters and make as many gates negative as possible) and gluing smaller gates into a bigger one wherever possible is not implemented in MPSat, so often one can manually improve the resulting circuit by doing such transformations.
</div></li>
</ul>

<div class="wrap_hide plugin_wrap"><ul>
<li class="level"><div class="li">
 There is a performance deterioration issue in MPSat when the library has many gates (we noticed it after moving from <code>petrify.lib</code> to much larger <code>workcraft.lib</code>); this will be fixed eventually.
</div></li>
</ul>

</div>
</div>

<h2 id="timing_assumptions">Timing assumptions</h2>
<div class="level2">

<p>
Petrify supports relative timing assumptions. These are not implemented in MPSat, and are not supported via Workcraft <abbr title="Graphical User Interface">GUI</abbr> (apart from zero delay inverters and buffers), and disrupt the speed-independent design flow. If timing assumptions are required, one has to fall back on Petrify&#039;s command-line interface.
</p>

</div>

                    <!-- wikipage stop -->
                                    </div>
<!--
                                    <div class="docInfo"><bdi>help/synthesis.txt</bdi> · Last modified: 2019/06/20 11:00 by <bdi>danil</bdi></div>
                -->

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
<!--
            <div id="dokuwiki__pagetools">
                            <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="synthesis.html"  class="action edit" accesskey="e" rel="nofollow" title="Edit this page [E]"><span>Edit this page</span></a></li><li><a href="synthesis.html"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="synthesis.html"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="synthesis.html"  class="action export_pdf" rel="nofollow" title="Export to PDF"><span>Export to PDF</span></a></li><li class="plugin_move_page"><a href="synthesis.html"><span>Rename Page</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li><li><a href="synthesis.html"  class="action siteexport_addpage" title="Export Page (Siteexport)"><span>Export Page</span></a></li><li><a href="javascript:void(0);" class="fold_unfold_all" onclick="fold_unfold_all();" rel="nofollow" title="Fold/unfold all"><span>Fold/unfold all</span></a></li><li><a href="synthesis.html"  class="action siteexport_mapid" title="Show Map-ID"" data-mapid="synthesis" onclick="copyMapIDToClipBoard.call(this); return false;"><span>Copy Map-ID: <span class="mapID" data-done="Done.">synthesis</span></span></a></li>                    </ul>
                </div>
                        </div>
-->
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
<!--
    
    <div class="buttons">
                <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="lib/tpl/dokuwiki-light-export/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://php.net" title="Powered by PHP" ><img
            src="lib/tpl/dokuwiki-light-export/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="lib/tpl/dokuwiki-light-export/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="lib/tpl/dokuwiki-light-export/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="lib/tpl/dokuwiki-light-export/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
    <div class="userInfo">
        Logged in as:: workcraft    </div>
-->
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img  width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div></body>
</html>
